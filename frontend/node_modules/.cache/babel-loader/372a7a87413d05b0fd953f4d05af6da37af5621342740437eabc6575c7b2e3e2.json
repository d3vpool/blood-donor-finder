{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rajya\\\\Desktop\\\\Coding\\\\WebDev\\\\Programs\\\\mini_project_LifeLink\\\\blood-donor-finder\\\\frontend\\\\src\\\\components\\\\DonorMap.jsx\",\n  _s = $RefreshSig$();\n// src/components/DonorMap.jsx\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { GoogleMap, useJsApiLoader } from \"@react-google-maps/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: \"100%\",\n  height: \"400px\"\n};\n\n// Helper: data-URL SVG icon\nfunction makeSvgIcon(color, label = \"\", size = 36) {\n  var _window$google$maps;\n  const svg = encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size}\" height=\"${size}\">\n       <circle cx=\"${size / 2}\" cy=\"${Math.floor(size * 0.36)}\" r=\"${Math.floor(size * 0.22)}\" fill=\"${color}\" />\n       <rect x=\"${Math.floor(size * 0.22)}\" y=\"${Math.floor(size * 0.68)}\"\n             width=\"${Math.floor(size * 0.56)}\" height=\"${Math.floor(size * 0.16)}\"\n             fill=\"${color}\" rx=\"${Math.floor(size * 0.04)}\" />\n       <text x=\"${size / 2}\" y=\"${Math.floor(size * 0.46)}\"\n             font-size=\"${Math.floor(size * 0.24)}\"\n             font-family=\"Arial\" text-anchor=\"middle\"\n             fill=\"#FFF\">${label}</text>\n     </svg>`);\n  const icon = {\n    url: `data:image/svg+xml;charset=UTF-8,${svg}`\n  };\n  if (window.google && (_window$google$maps = window.google.maps) !== null && _window$google$maps !== void 0 && _window$google$maps.Size) {\n    icon.scaledSize = new window.google.maps.Size(size, size);\n  }\n  return icon;\n}\n\n/**\r\n * DonorMap\r\n * Props:\r\n *  - recipientLocation: { latitude, longitude } OR GeolocationPosition\r\n *  - donors: array of donor objects with location.latitude / location.longitude\r\n *  - searchRadiusMiles: number\r\n *  - setMapController: optional function(controller) to receive { focusOn(lat,lng,zoom) }\r\n */\nexport default function DonorMap({\n  recipientLocation,\n  donors = [],\n  searchRadiusMiles = 25,\n  setMapController\n}) {\n  _s();\n  const apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\n  const {\n    isLoaded,\n    loadError\n  } = useJsApiLoader({\n    googleMapsApiKey: apiKey\n  });\n  const mapRef = useRef(null);\n  const markersRef = useRef([]);\n  const infoWindowRef = useRef(null);\n\n  // ensure effect re-runs when map instance becomes available\n  const [mapReady, setMapReady] = useState(false);\n  const normalized = (() => {\n    if (!recipientLocation) return null;\n    if (typeof recipientLocation.latitude === \"number\") return {\n      lat: Number(recipientLocation.latitude),\n      lng: Number(recipientLocation.longitude)\n    };\n    if (typeof recipientLocation.lat === \"number\") return {\n      lat: Number(recipientLocation.lat),\n      lng: Number(recipientLocation.lng)\n    };\n    if (recipientLocation.coords && typeof recipientLocation.coords.latitude === \"number\") return {\n      lat: Number(recipientLocation.coords.latitude),\n      lng: Number(recipientLocation.coords.longitude)\n    };\n    return null;\n  })();\n\n  // log for debugging\n  useEffect(() => {\n    console.log(\"DonorMap render — isLoaded:\", isLoaded, \"mapReady:\", mapReady, \"normalized:\", normalized, \"donors:\", donors.length);\n  });\n\n  // Marker placement effect (runs after maps are loaded and mapRef exists)\n  useEffect(() => {\n    if (!isLoaded) return;\n    if (!mapReady) return;\n    if (!mapRef.current) return;\n    const map = mapRef.current;\n    console.log(\"DonorMap: Placing markers…\");\n\n    // cleanup old markers and infoWindow\n    markersRef.current.forEach(m => {\n      try {\n        if (m && m.setMap) m.setMap(null);\n      } catch (_) {}\n    });\n    markersRef.current = [];\n    if (infoWindowRef.current) {\n      try {\n        infoWindowRef.current.close();\n      } catch (_) {}\n    } else {\n      infoWindowRef.current = new window.google.maps.InfoWindow();\n    }\n\n    // Fallback marker (debug)\n    const fallbackPos = {\n      lat: 12.9716,\n      lng: 77.5946\n    };\n    const fallback = new window.google.maps.Marker({\n      position: fallbackPos,\n      map,\n      title: \"FALLBACK\"\n    });\n    markersRef.current.push(fallback);\n    console.log(\"Fallback marker added →\", fallbackPos);\n\n    // User marker\n    if (normalized) {\n      const userMarker = new window.google.maps.Marker({\n        position: normalized,\n        map,\n        title: \"Your Location\",\n        icon: makeSvgIcon(\"#ff5252\", \"U\")\n      });\n      markersRef.current.push(userMarker);\n      console.log(\"User marker added →\", normalized);\n      map.setCenter(normalized);\n      map.setZoom(13);\n    } else {\n      console.log(\"No user location present; user marker skipped.\");\n    }\n\n    // Donor markers\n    (Array.isArray(donors) ? donors : []).forEach((d, i) => {\n      var _d$location$latitude, _d$location, _d$location2, _d$location$longitude, _d$location3, _d$location4;\n      const lat = Number((_d$location$latitude = d === null || d === void 0 ? void 0 : (_d$location = d.location) === null || _d$location === void 0 ? void 0 : _d$location.latitude) !== null && _d$location$latitude !== void 0 ? _d$location$latitude : d === null || d === void 0 ? void 0 : (_d$location2 = d.location) === null || _d$location2 === void 0 ? void 0 : _d$location2.lat);\n      const lng = Number((_d$location$longitude = d === null || d === void 0 ? void 0 : (_d$location3 = d.location) === null || _d$location3 === void 0 ? void 0 : _d$location3.longitude) !== null && _d$location$longitude !== void 0 ? _d$location$longitude : d === null || d === void 0 ? void 0 : (_d$location4 = d.location) === null || _d$location4 === void 0 ? void 0 : _d$location4.lng);\n      if (Number.isNaN(lat) || Number.isNaN(lng)) {\n        console.log(\"Skipping donor with invalid coords:\", d);\n        return;\n      }\n      const pos = {\n        lat,\n        lng\n      };\n      const mk = new window.google.maps.Marker({\n        position: pos,\n        map,\n        title: d.name || d.email || `Donor ${i + 1}`,\n        icon: makeSvgIcon(\"#4caf50\", String(i + 1))\n      });\n\n      // attach click to open InfoWindow with donor details\n      mk.addListener(\"click\", () => {\n        const content = `\n          <div style=\"min-width:200px\">\n            <strong>${d.name || \"Donor\"}</strong>\n            <div>Blood: ${d.bloodGroup || d.bloodType || \"N/A\"}</div>\n            <div>Contact: ${d.contact || d.phoneNo || \"N/A\"}</div>\n            ${d.city ? `<div>City: ${d.city}</div>` : \"\"}\n          </div>\n        `;\n        if (infoWindowRef.current) {\n          infoWindowRef.current.setContent(content);\n          infoWindowRef.current.open({\n            anchor: mk,\n            map\n          });\n        }\n      });\n      markersRef.current.push(mk);\n      console.log(\"Donor marker added:\", pos);\n    });\n\n    // debug: show center/zoom\n    setTimeout(() => {\n      try {\n        console.log(\"Map center:\", map.getCenter().toJSON(), \"zoom:\", map.getZoom());\n      } catch (e) {\n        console.log(\"Error reading map state:\", e);\n      }\n    }, 200);\n\n    // no return cleanup here because we clean at the top of the effect on re-run/unmount\n  }, [isLoaded, mapReady, normalized, donors, searchRadiusMiles]);\n\n  // Expose controller as soon as map is ready (so App can call focusOn)\n  useEffect(() => {\n    if (!isLoaded || !mapReady || !mapRef.current) {\n      // if controller was set previously, clear it on unready\n      if (typeof setMapController === \"function\") {\n        setMapController(null);\n      }\n      return;\n    }\n    if (typeof setMapController === \"function\") {\n      const controller = {\n        focusOn: (lat, lng, zoom = 15) => {\n          try {\n            const map = mapRef.current;\n            if (!map) return;\n            const pos = {\n              lat: Number(lat),\n              lng: Number(lng)\n            };\n            map.panTo(pos);\n            map.setZoom(zoom);\n\n            // try to open matching marker's infoWindow\n            const matching = markersRef.current.find(m => {\n              try {\n                const p = m.getPosition && m.getPosition().toJSON();\n                return p && p.lat === pos.lat && p.lng === pos.lng;\n              } catch (_) {\n                return false;\n              }\n            });\n            if (matching && infoWindowRef.current) {\n              const title = matching.getTitle ? matching.getTitle() : \"\";\n              infoWindowRef.current.setContent(`<div><strong>${title}</strong></div>`);\n              infoWindowRef.current.open({\n                anchor: matching,\n                map\n              });\n            }\n          } catch (e) {\n            console.warn(\"controller.focusOn error:\", e);\n          }\n        }\n      };\n      setMapController(controller);\n      // do NOT repeatedly set the controller every render\n      // ensure parent will flush queued calls when it receives this object\n    }\n    // cleanup: unset controller on unmount\n    return () => {\n      if (typeof setMapController === \"function\") setMapController(null);\n    };\n  }, [isLoaded, mapReady, setMapController]);\n  if (loadError) {\n    console.error(\"DonorMap loadError:\", loadError);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Map failed to load: \", String(loadError)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 12\n    }, this);\n  }\n  if (!isLoaded) return null;\n  return /*#__PURE__*/_jsxDEV(GoogleMap, {\n    mapContainerStyle: containerStyle,\n    center: normalized || {\n      lat: 12.9716,\n      lng: 77.5946\n    },\n    zoom: normalized ? 13 : 11,\n    onLoad: map => {\n      mapRef.current = map;\n      console.log(\"GoogleMap onLoad → mapRef set\");\n      setMapReady(true);\n    },\n    onUnmount: () => {\n      // cleanup mapRef and mark not ready\n      mapRef.current = null;\n      setMapReady(false);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 5\n  }, this);\n}\n_s(DonorMap, \"c5lBCDUL8Xs5qM4V8zVoV94Qqyc=\", false, function () {\n  return [useJsApiLoader];\n});\n_c = DonorMap;\nvar _c;\n$RefreshReg$(_c, \"DonorMap\");","map":{"version":3,"names":["React","useEffect","useRef","useState","GoogleMap","useJsApiLoader","jsxDEV","_jsxDEV","containerStyle","width","height","makeSvgIcon","color","label","size","_window$google$maps","svg","encodeURIComponent","Math","floor","icon","url","window","google","maps","Size","scaledSize","DonorMap","recipientLocation","donors","searchRadiusMiles","setMapController","_s","apiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","isLoaded","loadError","googleMapsApiKey","mapRef","markersRef","infoWindowRef","mapReady","setMapReady","normalized","latitude","lat","Number","lng","longitude","coords","console","log","length","current","map","forEach","m","setMap","_","close","InfoWindow","fallbackPos","fallback","Marker","position","title","push","userMarker","setCenter","setZoom","Array","isArray","d","i","_d$location$latitude","_d$location","_d$location2","_d$location$longitude","_d$location3","_d$location4","location","isNaN","pos","mk","name","email","String","addListener","content","bloodGroup","bloodType","contact","phoneNo","city","setContent","open","anchor","setTimeout","getCenter","toJSON","getZoom","e","controller","focusOn","zoom","panTo","matching","find","p","getPosition","getTitle","warn","error","children","fileName","_jsxFileName","lineNumber","columnNumber","mapContainerStyle","center","onLoad","onUnmount","_c","$RefreshReg$"],"sources":["C:/Users/rajya/Desktop/Coding/WebDev/Programs/mini_project_LifeLink/blood-donor-finder/frontend/src/components/DonorMap.jsx"],"sourcesContent":["// src/components/DonorMap.jsx\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { GoogleMap, useJsApiLoader } from \"@react-google-maps/api\";\r\n\r\nconst containerStyle = { width: \"100%\", height: \"400px\" };\r\n\r\n// Helper: data-URL SVG icon\r\nfunction makeSvgIcon(color, label = \"\", size = 36) {\r\n  const svg = encodeURIComponent(\r\n    `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size}\" height=\"${size}\">\r\n       <circle cx=\"${size/2}\" cy=\"${Math.floor(size*0.36)}\" r=\"${Math.floor(size*0.22)}\" fill=\"${color}\" />\r\n       <rect x=\"${Math.floor(size*0.22)}\" y=\"${Math.floor(size*0.68)}\"\r\n             width=\"${Math.floor(size*0.56)}\" height=\"${Math.floor(size*0.16)}\"\r\n             fill=\"${color}\" rx=\"${Math.floor(size*0.04)}\" />\r\n       <text x=\"${size/2}\" y=\"${Math.floor(size*0.46)}\"\r\n             font-size=\"${Math.floor(size*0.24)}\"\r\n             font-family=\"Arial\" text-anchor=\"middle\"\r\n             fill=\"#FFF\">${label}</text>\r\n     </svg>`\r\n  );\r\n\r\n  const icon = { url: `data:image/svg+xml;charset=UTF-8,${svg}` };\r\n  if (window.google && window.google.maps?.Size) {\r\n    icon.scaledSize = new window.google.maps.Size(size, size);\r\n  }\r\n  return icon;\r\n}\r\n\r\n/**\r\n * DonorMap\r\n * Props:\r\n *  - recipientLocation: { latitude, longitude } OR GeolocationPosition\r\n *  - donors: array of donor objects with location.latitude / location.longitude\r\n *  - searchRadiusMiles: number\r\n *  - setMapController: optional function(controller) to receive { focusOn(lat,lng,zoom) }\r\n */\r\nexport default function DonorMap({\r\n  recipientLocation,\r\n  donors = [],\r\n  searchRadiusMiles = 25,\r\n  setMapController\r\n}) {\r\n  const apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\r\n  const { isLoaded, loadError } = useJsApiLoader({ googleMapsApiKey: apiKey });\r\n\r\n  const mapRef = useRef(null);\r\n  const markersRef = useRef([]);\r\n  const infoWindowRef = useRef(null);\r\n\r\n  // ensure effect re-runs when map instance becomes available\r\n  const [mapReady, setMapReady] = useState(false);\r\n\r\n  const normalized = (() => {\r\n    if (!recipientLocation) return null;\r\n    if (typeof recipientLocation.latitude === \"number\")\r\n      return { lat: Number(recipientLocation.latitude), lng: Number(recipientLocation.longitude) };\r\n    if (typeof recipientLocation.lat === \"number\")\r\n      return { lat: Number(recipientLocation.lat), lng: Number(recipientLocation.lng) };\r\n    if (recipientLocation.coords && typeof recipientLocation.coords.latitude === \"number\")\r\n      return { lat: Number(recipientLocation.coords.latitude), lng: Number(recipientLocation.coords.longitude) };\r\n    return null;\r\n  })();\r\n\r\n  // log for debugging\r\n  useEffect(() => {\r\n    console.log(\"DonorMap render — isLoaded:\", isLoaded, \"mapReady:\", mapReady, \"normalized:\", normalized, \"donors:\", donors.length);\r\n  });\r\n\r\n  // Marker placement effect (runs after maps are loaded and mapRef exists)\r\n  useEffect(() => {\r\n    if (!isLoaded) return;\r\n    if (!mapReady) return;\r\n    if (!mapRef.current) return;\r\n\r\n    const map = mapRef.current;\r\n    console.log(\"DonorMap: Placing markers…\");\r\n\r\n    // cleanup old markers and infoWindow\r\n    markersRef.current.forEach((m) => { try { if (m && m.setMap) m.setMap(null); } catch (_) {} });\r\n    markersRef.current = [];\r\n    if (infoWindowRef.current) {\r\n      try { infoWindowRef.current.close(); } catch (_) {}\r\n    } else {\r\n      infoWindowRef.current = new window.google.maps.InfoWindow();\r\n    }\r\n\r\n    // Fallback marker (debug)\r\n    const fallbackPos = { lat: 12.9716, lng: 77.5946 };\r\n    const fallback = new window.google.maps.Marker({ position: fallbackPos, map, title: \"FALLBACK\" });\r\n    markersRef.current.push(fallback);\r\n    console.log(\"Fallback marker added →\", fallbackPos);\r\n\r\n    // User marker\r\n    if (normalized) {\r\n      const userMarker = new window.google.maps.Marker({\r\n        position: normalized,\r\n        map,\r\n        title: \"Your Location\",\r\n        icon: makeSvgIcon(\"#ff5252\", \"U\")\r\n      });\r\n      markersRef.current.push(userMarker);\r\n      console.log(\"User marker added →\", normalized);\r\n      map.setCenter(normalized);\r\n      map.setZoom(13);\r\n    } else {\r\n      console.log(\"No user location present; user marker skipped.\");\r\n    }\r\n\r\n    // Donor markers\r\n    (Array.isArray(donors) ? donors : []).forEach((d, i) => {\r\n      const lat = Number(d?.location?.latitude ?? d?.location?.lat);\r\n      const lng = Number(d?.location?.longitude ?? d?.location?.lng);\r\n      if (Number.isNaN(lat) || Number.isNaN(lng)) {\r\n        console.log(\"Skipping donor with invalid coords:\", d);\r\n        return;\r\n      }\r\n      const pos = { lat, lng };\r\n      const mk = new window.google.maps.Marker({\r\n        position: pos,\r\n        map,\r\n        title: d.name || d.email || `Donor ${i + 1}`,\r\n        icon: makeSvgIcon(\"#4caf50\", String(i + 1))\r\n      });\r\n\r\n      // attach click to open InfoWindow with donor details\r\n      mk.addListener(\"click\", () => {\r\n        const content = `\r\n          <div style=\"min-width:200px\">\r\n            <strong>${d.name || \"Donor\"}</strong>\r\n            <div>Blood: ${d.bloodGroup || d.bloodType || \"N/A\"}</div>\r\n            <div>Contact: ${d.contact || d.phoneNo || \"N/A\"}</div>\r\n            ${d.city ? `<div>City: ${d.city}</div>` : \"\"}\r\n          </div>\r\n        `;\r\n        if (infoWindowRef.current) {\r\n          infoWindowRef.current.setContent(content);\r\n          infoWindowRef.current.open({ anchor: mk, map });\r\n        }\r\n      });\r\n\r\n      markersRef.current.push(mk);\r\n      console.log(\"Donor marker added:\", pos);\r\n    });\r\n\r\n    // debug: show center/zoom\r\n    setTimeout(() => {\r\n      try {\r\n        console.log(\"Map center:\", map.getCenter().toJSON(), \"zoom:\", map.getZoom());\r\n      } catch (e) {\r\n        console.log(\"Error reading map state:\", e);\r\n      }\r\n    }, 200);\r\n\r\n    // no return cleanup here because we clean at the top of the effect on re-run/unmount\r\n  }, [isLoaded, mapReady, normalized, donors, searchRadiusMiles]);\r\n\r\n  // Expose controller as soon as map is ready (so App can call focusOn)\r\n  useEffect(() => {\r\n    if (!isLoaded || !mapReady || !mapRef.current) {\r\n      // if controller was set previously, clear it on unready\r\n      if (typeof setMapController === \"function\") {\r\n        setMapController(null);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (typeof setMapController === \"function\") {\r\n      const controller = {\r\n        focusOn: (lat, lng, zoom = 15) => {\r\n          try {\r\n            const map = mapRef.current;\r\n            if (!map) return;\r\n            const pos = { lat: Number(lat), lng: Number(lng) };\r\n            map.panTo(pos);\r\n            map.setZoom(zoom);\r\n\r\n            // try to open matching marker's infoWindow\r\n            const matching = markersRef.current.find((m) => {\r\n              try {\r\n                const p = m.getPosition && m.getPosition().toJSON();\r\n                return p && p.lat === pos.lat && p.lng === pos.lng;\r\n              } catch (_) {\r\n                return false;\r\n              }\r\n            });\r\n\r\n            if (matching && infoWindowRef.current) {\r\n              const title = matching.getTitle ? matching.getTitle() : \"\";\r\n              infoWindowRef.current.setContent(`<div><strong>${title}</strong></div>`);\r\n              infoWindowRef.current.open({ anchor: matching, map });\r\n            }\r\n          } catch (e) {\r\n            console.warn(\"controller.focusOn error:\", e);\r\n          }\r\n        }\r\n      };\r\n\r\n      setMapController(controller);\r\n      // do NOT repeatedly set the controller every render\r\n      // ensure parent will flush queued calls when it receives this object\r\n    }\r\n    // cleanup: unset controller on unmount\r\n    return () => {\r\n      if (typeof setMapController === \"function\") setMapController(null);\r\n    };\r\n  }, [isLoaded, mapReady, setMapController]);\r\n\r\n  if (loadError) {\r\n    console.error(\"DonorMap loadError:\", loadError);\r\n    return <div>Map failed to load: {String(loadError)}</div>;\r\n  }\r\n  if (!isLoaded) return null;\r\n\r\n  return (\r\n    <GoogleMap\r\n      mapContainerStyle={containerStyle}\r\n      center={normalized || { lat: 12.9716, lng: 77.5946 }}\r\n      zoom={normalized ? 13 : 11}\r\n      onLoad={(map) => {\r\n        mapRef.current = map;\r\n        console.log(\"GoogleMap onLoad → mapRef set\");\r\n        setMapReady(true);\r\n      }}\r\n      onUnmount={() => {\r\n        // cleanup mapRef and mark not ready\r\n        mapRef.current = null;\r\n        setMapReady(false);\r\n      }}\r\n    />\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}