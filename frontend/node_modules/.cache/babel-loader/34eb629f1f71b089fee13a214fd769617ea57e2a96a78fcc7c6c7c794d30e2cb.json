{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rajya\\\\Desktop\\\\Coding\\\\WebDev\\\\Programs\\\\mini_project_LifeLink\\\\blood-donor-finder\\\\frontend\\\\src\\\\components\\\\DonorMap.jsx\",\n  _s = $RefreshSig$();\n// src/components/DonorMap.jsx\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { GoogleMap, useJsApiLoader } from \"@react-google-maps/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: \"100%\",\n  height: \"400px\"\n};\n\n/**\r\n * DonorMap\r\n * - recipientLocation: { latitude, longitude } or GeolocationPosition\r\n * - donors: array with donor.location.latitude & donor.location.longitude\r\n * - searchRadiusMiles: number\r\n * - setMapController: optional callback(controller) to receive { focusOn(lat,lng,zoom) }\r\n */\nexport default function DonorMap({\n  recipientLocation,\n  donors = [],\n  searchRadiusMiles = 25,\n  setMapController\n}) {\n  _s();\n  const apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\n  const {\n    isLoaded,\n    loadError\n  } = useJsApiLoader({\n    googleMapsApiKey: apiKey\n  });\n  const mapRef = useRef(null);\n  const markersRef = useRef([]);\n  const infoWindowRef = useRef(null);\n  const [mapReady, setMapReady] = useState(false);\n\n  // normalize recipientLocation -> { lat, lng } or null\n  const normalized = (() => {\n    if (!recipientLocation) return null;\n    if (typeof recipientLocation.latitude === \"number\") return {\n      lat: Number(recipientLocation.latitude),\n      lng: Number(recipientLocation.longitude)\n    };\n    if (typeof recipientLocation.lat === \"number\") return {\n      lat: Number(recipientLocation.lat),\n      lng: Number(recipientLocation.lng)\n    };\n    if (recipientLocation.coords && typeof recipientLocation.coords.latitude === \"number\") return {\n      lat: Number(recipientLocation.coords.latitude),\n      lng: Number(recipientLocation.coords.longitude)\n    };\n    return null;\n  })();\n  useEffect(() => {\n    // debug log\n    console.log(\"DonorMap render — isLoaded:\", isLoaded, \"mapReady:\", mapReady, \"normalized:\", normalized, \"donors:\", donors.length);\n  });\n\n  // Place markers (runs when maps loaded and mapRef available)\n  useEffect(() => {\n    if (!isLoaded) return;\n    if (!mapReady) return;\n    if (!mapRef.current) return;\n    const map = mapRef.current;\n    console.log(\"DonorMap: placing markers\");\n\n    // cleanup previous markers & close infoWindow\n    markersRef.current.forEach(m => {\n      try {\n        if (m && m.setMap) m.setMap(null);\n      } catch (_) {}\n    });\n    markersRef.current = [];\n    if (infoWindowRef.current) {\n      try {\n        infoWindowRef.current.close();\n      } catch (_) {}\n    } else {\n      infoWindowRef.current = new window.google.maps.InfoWindow();\n    }\n\n    // USER MARKER (default Google marker)\n    if (normalized) {\n      const userMarker = new window.google.maps.Marker({\n        position: normalized,\n        map,\n        title: \"Your Location\"\n      });\n      markersRef.current.push({\n        marker: userMarker,\n        type: \"user\"\n      });\n      map.setCenter(normalized);\n      map.setZoom(13);\n      console.log(\"User marker added →\", normalized);\n    } else {\n      console.log(\"No user location available; user marker skipped\");\n    }\n\n    // DONOR MARKERS (default Google marker) — attach click to show name + email\n    (Array.isArray(donors) ? donors : []).forEach((d, i) => {\n      var _d$location$latitude, _d$location, _d$location2, _d$location$longitude, _d$location3, _d$location4;\n      const lat = Number((_d$location$latitude = d === null || d === void 0 ? void 0 : (_d$location = d.location) === null || _d$location === void 0 ? void 0 : _d$location.latitude) !== null && _d$location$latitude !== void 0 ? _d$location$latitude : d === null || d === void 0 ? void 0 : (_d$location2 = d.location) === null || _d$location2 === void 0 ? void 0 : _d$location2.lat);\n      const lng = Number((_d$location$longitude = d === null || d === void 0 ? void 0 : (_d$location3 = d.location) === null || _d$location3 === void 0 ? void 0 : _d$location3.longitude) !== null && _d$location$longitude !== void 0 ? _d$location$longitude : d === null || d === void 0 ? void 0 : (_d$location4 = d.location) === null || _d$location4 === void 0 ? void 0 : _d$location4.lng);\n      if (Number.isNaN(lat) || Number.isNaN(lng)) {\n        console.log(\"Skipping donor with invalid coords:\", d);\n        return;\n      }\n      const pos = {\n        lat,\n        lng\n      };\n      const mk = new window.google.maps.Marker({\n        position: pos,\n        map,\n        title: d.fullname || d.email || `Donor ${i + 1}`\n      });\n      mk.addListener(\"click\", () => {\n        const name = d.fullname || \"Donor\";\n        const email = d.email || \"No email\";\n        const content = `\n          <div style=\"min-width:200px\">\n            <div><strong>${escapeHtml(name)}</strong></div>\n            <div style=\"font-size:13px;color:#555\">${escapeHtml(email)}</div>\n          </div>\n        `;\n        infoWindowRef.current.setContent(content);\n        infoWindowRef.current.open({\n          anchor: mk,\n          map\n        });\n      });\n      markersRef.current.push({\n        marker: mk,\n        type: \"donor\",\n        donor: d\n      });\n      console.log(\"Donor marker added:\", pos, \"->\", d.fullname || d.email);\n    });\n\n    // log map center/zoom for debugging\n    setTimeout(() => {\n      try {\n        console.log(\"Map center:\", map.getCenter().toJSON(), \"zoom:\", map.getZoom());\n      } catch (_) {}\n    }, 200);\n\n    // cleanup handled at top of effect on re-run/unmount\n  }, [isLoaded, mapReady, normalized, donors, searchRadiusMiles]);\n\n  // Expose controller to parent to focus on a given lat/lng and show name+email\n  useEffect(() => {\n    if (!isLoaded || !mapReady || !mapRef.current) {\n      if (typeof setMapController === \"function\") setMapController(null);\n      return;\n    }\n    if (typeof setMapController === \"function\") {\n      const controller = {\n        focusOn: (lat, lng, zoom = 15) => {\n          try {\n            const map = mapRef.current;\n            if (!map) return;\n            const pos = {\n              lat: Number(lat),\n              lng: Number(lng)\n            };\n            map.panTo(pos);\n            map.setZoom(zoom);\n\n            // find matching marker by position\n            const found = markersRef.current.find(entry => {\n              try {\n                const p = entry.marker.getPosition && entry.marker.getPosition().toJSON();\n                return p && p.lat === pos.lat && p.lng === pos.lng && entry.type === \"donor\";\n              } catch (_) {\n                return false;\n              }\n            });\n            if (!found) {\n              // If we couldn't match exactly, try approximate match (tiny tolerance)\n              const tol = 1e-6;\n              const approx = markersRef.current.find(entry => {\n                try {\n                  const p = entry.marker.getPosition && entry.marker.getPosition().toJSON();\n                  return p && Math.abs(p.lat - pos.lat) < tol && Math.abs(p.lng - pos.lng) < tol && entry.type === \"donor\";\n                } catch (_) {\n                  return false;\n                }\n              });\n              if (approx) {\n                // use approx as found\n                const d = approx.donor;\n                const content = `<div><div><strong>${escapeHtml(d.fullname || \"Donor\")}</strong></div><div style=\"font-size:13px;color:#555\">${escapeHtml(d.email || \"No email\")}</div></div>`;\n                infoWindowRef.current.setContent(content);\n                infoWindowRef.current.open({\n                  anchor: approx.marker,\n                  map\n                });\n                return;\n              }\n              return;\n            }\n\n            // found is an entry with donor\n            const donor = found.donor;\n            const content = `<div><div><strong>${escapeHtml(donor.fullname || \"Donor\")}</strong></div><div style=\"font-size:13px;color:#555\">${escapeHtml(donor.email || \"No email\")}</div></div>`;\n            infoWindowRef.current.setContent(content);\n            infoWindowRef.current.open({\n              anchor: found.marker,\n              map\n            });\n          } catch (e) {\n            console.warn(\"controller.focusOn error:\", e);\n          }\n        }\n      };\n      setMapController(controller);\n    }\n    return () => {\n      if (typeof setMapController === \"function\") setMapController(null);\n    };\n  }, [isLoaded, mapReady, setMapController, donors]);\n  if (loadError) {\n    console.error(\"DonorMap loadError:\", loadError);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Map failed to load: \", String(loadError)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 12\n    }, this);\n  }\n  if (!isLoaded) return null;\n  return /*#__PURE__*/_jsxDEV(GoogleMap, {\n    mapContainerStyle: containerStyle,\n    center: normalized || {\n      lat: 12.9716,\n      lng: 77.5946\n    },\n    zoom: normalized ? 13 : 11,\n    onLoad: map => {\n      mapRef.current = map;\n      console.log(\"GoogleMap onLoad → mapRef set\");\n      setMapReady(true);\n    },\n    onUnmount: () => {\n      mapRef.current = null;\n      setMapReady(false);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n}\n\n/**\r\n * Simple HTML-escape helper used when writing InfoWindow content.\r\n * Prevents injection when donor data contains special characters.\r\n */\n_s(DonorMap, \"c5lBCDUL8Xs5qM4V8zVoV94Qqyc=\", false, function () {\n  return [useJsApiLoader];\n});\n_c = DonorMap;\nfunction escapeHtml(str) {\n  if (!str && str !== \"\") return \"\";\n  return String(str).replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\");\n}\nvar _c;\n$RefreshReg$(_c, \"DonorMap\");","map":{"version":3,"names":["React","useEffect","useRef","useState","GoogleMap","useJsApiLoader","jsxDEV","_jsxDEV","containerStyle","width","height","DonorMap","recipientLocation","donors","searchRadiusMiles","setMapController","_s","apiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","isLoaded","loadError","googleMapsApiKey","mapRef","markersRef","infoWindowRef","mapReady","setMapReady","normalized","latitude","lat","Number","lng","longitude","coords","console","log","length","current","map","forEach","m","setMap","_","close","window","google","maps","InfoWindow","userMarker","Marker","position","title","push","marker","type","setCenter","setZoom","Array","isArray","d","i","_d$location$latitude","_d$location","_d$location2","_d$location$longitude","_d$location3","_d$location4","location","isNaN","pos","mk","fullname","email","addListener","name","content","escapeHtml","setContent","open","anchor","donor","setTimeout","getCenter","toJSON","getZoom","controller","focusOn","zoom","panTo","found","find","entry","p","getPosition","tol","approx","Math","abs","e","warn","error","children","String","fileName","_jsxFileName","lineNumber","columnNumber","mapContainerStyle","center","onLoad","onUnmount","_c","str","replace","$RefreshReg$"],"sources":["C:/Users/rajya/Desktop/Coding/WebDev/Programs/mini_project_LifeLink/blood-donor-finder/frontend/src/components/DonorMap.jsx"],"sourcesContent":["// src/components/DonorMap.jsx\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { GoogleMap, useJsApiLoader } from \"@react-google-maps/api\";\r\n\r\nconst containerStyle = { width: \"100%\", height: \"400px\" };\r\n\r\n/**\r\n * DonorMap\r\n * - recipientLocation: { latitude, longitude } or GeolocationPosition\r\n * - donors: array with donor.location.latitude & donor.location.longitude\r\n * - searchRadiusMiles: number\r\n * - setMapController: optional callback(controller) to receive { focusOn(lat,lng,zoom) }\r\n */\r\nexport default function DonorMap({\r\n  recipientLocation,\r\n  donors = [],\r\n  searchRadiusMiles = 25,\r\n  setMapController\r\n}) {\r\n  const apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\r\n  const { isLoaded, loadError } = useJsApiLoader({ googleMapsApiKey: apiKey });\r\n\r\n  const mapRef = useRef(null);\r\n  const markersRef = useRef([]);\r\n  const infoWindowRef = useRef(null);\r\n  const [mapReady, setMapReady] = useState(false);\r\n\r\n  // normalize recipientLocation -> { lat, lng } or null\r\n  const normalized = (() => {\r\n    if (!recipientLocation) return null;\r\n    if (typeof recipientLocation.latitude === \"number\")\r\n      return { lat: Number(recipientLocation.latitude), lng: Number(recipientLocation.longitude) };\r\n    if (typeof recipientLocation.lat === \"number\")\r\n      return { lat: Number(recipientLocation.lat), lng: Number(recipientLocation.lng) };\r\n    if (recipientLocation.coords && typeof recipientLocation.coords.latitude === \"number\")\r\n      return { lat: Number(recipientLocation.coords.latitude), lng: Number(recipientLocation.coords.longitude) };\r\n    return null;\r\n  })();\r\n\r\n  useEffect(() => {\r\n    // debug log\r\n    console.log(\"DonorMap render — isLoaded:\", isLoaded, \"mapReady:\", mapReady, \"normalized:\", normalized, \"donors:\", donors.length);\r\n  });\r\n\r\n  // Place markers (runs when maps loaded and mapRef available)\r\n  useEffect(() => {\r\n    if (!isLoaded) return;\r\n    if (!mapReady) return;\r\n    if (!mapRef.current) return;\r\n\r\n    const map = mapRef.current;\r\n    console.log(\"DonorMap: placing markers\");\r\n\r\n    // cleanup previous markers & close infoWindow\r\n    markersRef.current.forEach((m) => {\r\n      try { if (m && m.setMap) m.setMap(null); } catch (_) {}\r\n    });\r\n    markersRef.current = [];\r\n\r\n    if (infoWindowRef.current) {\r\n      try { infoWindowRef.current.close(); } catch (_) {}\r\n    } else {\r\n      infoWindowRef.current = new window.google.maps.InfoWindow();\r\n    }\r\n\r\n    // USER MARKER (default Google marker)\r\n    if (normalized) {\r\n      const userMarker = new window.google.maps.Marker({\r\n        position: normalized,\r\n        map,\r\n        title: \"Your Location\"\r\n      });\r\n      markersRef.current.push({ marker: userMarker, type: \"user\" });\r\n      map.setCenter(normalized);\r\n      map.setZoom(13);\r\n      console.log(\"User marker added →\", normalized);\r\n    } else {\r\n      console.log(\"No user location available; user marker skipped\");\r\n    }\r\n\r\n    // DONOR MARKERS (default Google marker) — attach click to show name + email\r\n    (Array.isArray(donors) ? donors : []).forEach((d, i) => {\r\n      const lat = Number(d?.location?.latitude ?? d?.location?.lat);\r\n      const lng = Number(d?.location?.longitude ?? d?.location?.lng);\r\n      if (Number.isNaN(lat) || Number.isNaN(lng)) {\r\n        console.log(\"Skipping donor with invalid coords:\", d);\r\n        return;\r\n      }\r\n      const pos = { lat, lng };\r\n\r\n      const mk = new window.google.maps.Marker({\r\n        position: pos,\r\n        map,\r\n        title: d.fullname || d.email || `Donor ${i + 1}`\r\n      });\r\n\r\n      mk.addListener(\"click\", () => {\r\n        const name = d.fullname || \"Donor\";\r\n        const email = d.email || \"No email\";\r\n        const content = `\r\n          <div style=\"min-width:200px\">\r\n            <div><strong>${escapeHtml(name)}</strong></div>\r\n            <div style=\"font-size:13px;color:#555\">${escapeHtml(email)}</div>\r\n          </div>\r\n        `;\r\n        infoWindowRef.current.setContent(content);\r\n        infoWindowRef.current.open({ anchor: mk, map });\r\n      });\r\n\r\n      markersRef.current.push({ marker: mk, type: \"donor\", donor: d });\r\n      console.log(\"Donor marker added:\", pos, \"->\", d.fullname || d.email);\r\n    });\r\n\r\n    // log map center/zoom for debugging\r\n    setTimeout(() => {\r\n      try {\r\n        console.log(\"Map center:\", map.getCenter().toJSON(), \"zoom:\", map.getZoom());\r\n      } catch (_) {}\r\n    }, 200);\r\n\r\n    // cleanup handled at top of effect on re-run/unmount\r\n  }, [isLoaded, mapReady, normalized, donors, searchRadiusMiles]);\r\n\r\n  // Expose controller to parent to focus on a given lat/lng and show name+email\r\n  useEffect(() => {\r\n    if (!isLoaded || !mapReady || !mapRef.current) {\r\n      if (typeof setMapController === \"function\") setMapController(null);\r\n      return;\r\n    }\r\n\r\n    if (typeof setMapController === \"function\") {\r\n      const controller = {\r\n        focusOn: (lat, lng, zoom = 15) => {\r\n          try {\r\n            const map = mapRef.current;\r\n            if (!map) return;\r\n            const pos = { lat: Number(lat), lng: Number(lng) };\r\n            map.panTo(pos);\r\n            map.setZoom(zoom);\r\n\r\n            // find matching marker by position\r\n            const found = markersRef.current.find((entry) => {\r\n              try {\r\n                const p = entry.marker.getPosition && entry.marker.getPosition().toJSON();\r\n                return p && p.lat === pos.lat && p.lng === pos.lng && entry.type === \"donor\";\r\n              } catch (_) {\r\n                return false;\r\n              }\r\n            });\r\n\r\n            if (!found) {\r\n              // If we couldn't match exactly, try approximate match (tiny tolerance)\r\n              const tol = 1e-6;\r\n              const approx = markersRef.current.find((entry) => {\r\n                try {\r\n                  const p = entry.marker.getPosition && entry.marker.getPosition().toJSON();\r\n                  return p && Math.abs(p.lat - pos.lat) < tol && Math.abs(p.lng - pos.lng) < tol && entry.type === \"donor\";\r\n                } catch (_) {\r\n                  return false;\r\n                }\r\n              });\r\n              if (approx) {\r\n                // use approx as found\r\n                const d = approx.donor;\r\n                const content = `<div><div><strong>${escapeHtml(d.fullname || \"Donor\")}</strong></div><div style=\"font-size:13px;color:#555\">${escapeHtml(d.email || \"No email\")}</div></div>`;\r\n                infoWindowRef.current.setContent(content);\r\n                infoWindowRef.current.open({ anchor: approx.marker, map });\r\n                return;\r\n              }\r\n              return;\r\n            }\r\n\r\n            // found is an entry with donor\r\n            const donor = found.donor;\r\n            const content = `<div><div><strong>${escapeHtml(donor.fullname || \"Donor\")}</strong></div><div style=\"font-size:13px;color:#555\">${escapeHtml(donor.email || \"No email\")}</div></div>`;\r\n            infoWindowRef.current.setContent(content);\r\n            infoWindowRef.current.open({ anchor: found.marker, map });\r\n          } catch (e) {\r\n            console.warn(\"controller.focusOn error:\", e);\r\n          }\r\n        }\r\n      };\r\n\r\n      setMapController(controller);\r\n    }\r\n\r\n    return () => {\r\n      if (typeof setMapController === \"function\") setMapController(null);\r\n    };\r\n  }, [isLoaded, mapReady, setMapController, donors]);\r\n\r\n  if (loadError) {\r\n    console.error(\"DonorMap loadError:\", loadError);\r\n    return <div>Map failed to load: {String(loadError)}</div>;\r\n  }\r\n  if (!isLoaded) return null;\r\n\r\n  return (\r\n    <GoogleMap\r\n      mapContainerStyle={containerStyle}\r\n      center={normalized || { lat: 12.9716, lng: 77.5946 }}\r\n      zoom={normalized ? 13 : 11}\r\n      onLoad={(map) => {\r\n        mapRef.current = map;\r\n        console.log(\"GoogleMap onLoad → mapRef set\");\r\n        setMapReady(true);\r\n      }}\r\n      onUnmount={() => {\r\n        mapRef.current = null;\r\n        setMapReady(false);\r\n      }}\r\n    />\r\n  );\r\n}\r\n\r\n/**\r\n * Simple HTML-escape helper used when writing InfoWindow content.\r\n * Prevents injection when donor data contains special characters.\r\n */\r\nfunction escapeHtml(str) {\r\n  if (!str && str !== \"\") return \"\";\r\n  return String(str)\r\n    .replace(/&/g, \"&amp;\")\r\n    .replace(/</g, \"&lt;\")\r\n    .replace(/>/g, \"&gt;\")\r\n    .replace(/\"/g, \"&quot;\")\r\n    .replace(/'/g, \"&#039;\");\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}