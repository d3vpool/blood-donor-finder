{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rajya\\\\Desktop\\\\Coding\\\\WebDev\\\\Programs\\\\mini_project_LifeLink\\\\blood-donor-finder\\\\frontend\\\\src\\\\components\\\\DonorMap.jsx\",\n  _s = $RefreshSig$();\n// DonorMap.jsx\nimport React, { useEffect, useRef, useState } from 'react';\nimport { GoogleMap, LoadScript, Marker, InfoWindow, Circle } from '@react-google-maps/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: '100%',\n  height: '400px'\n};\nconst circleOptions = {\n  strokeOpacity: 0.6,\n  strokeWeight: 2,\n  clickable: false,\n  draggable: false,\n  editable: false,\n  visible: true,\n  zIndex: 1\n};\nfunction DonorMap({\n  recipientLocation,\n  donors = [],\n  searchRadiusMiles = 25\n}) {\n  _s();\n  const mapRef = useRef(null);\n  const [selectedDonor, setSelectedDonor] = useState(null);\n  const hasUserLocation = recipientLocation && typeof recipientLocation.latitude === \"number\" && typeof recipientLocation.longitude === \"number\";\n  const center = hasUserLocation ? {\n    lat: recipientLocation.latitude,\n    lng: recipientLocation.longitude\n  } : {\n    lat: 0,\n    lng: 0\n  }; // dummy values to keep hooks stable\n\n  const radiusMeters = Number(searchRadiusMiles) * 1609.34;\n  const apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY || \"YOUR_KEY_HERE\";\n  useEffect(() => {\n    if (!hasUserLocation) return;\n    if (!mapRef.current) return;\n    const map = mapRef.current;\n    const bounds = new window.google.maps.LatLngBounds();\n    bounds.extend(new window.google.maps.LatLng(center.lat, center.lng));\n    donors.forEach(d => {\n      var _d$location, _d$location2;\n      const lat = d === null || d === void 0 ? void 0 : (_d$location = d.location) === null || _d$location === void 0 ? void 0 : _d$location.latitude;\n      const lng = d === null || d === void 0 ? void 0 : (_d$location2 = d.location) === null || _d$location2 === void 0 ? void 0 : _d$location2.longitude;\n      if (typeof lat === \"number\" && typeof lng === \"number\") {\n        bounds.extend(new window.google.maps.LatLng(lat, lng));\n      }\n    });\n    try {\n      map.fitBounds(bounds);\n    } catch (_) {\n      map.setCenter(center);\n      map.setZoom(12);\n    }\n  }, [hasUserLocation, center, donors]);\n  return /*#__PURE__*/_jsxDEV(LoadScript, {\n    googleMapsApiKey: apiKey,\n    children: hasUserLocation ? /*#__PURE__*/_jsxDEV(GoogleMap, {\n      mapContainerStyle: containerStyle,\n      center: center,\n      zoom: 12,\n      onLoad: map => {\n        mapRef.current = map;\n      },\n      children: [/*#__PURE__*/_jsxDEV(Marker, {\n        position: center,\n        icon: {\n          url: \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\",\n          scaledSize: new window.google.maps.Size(40, 40)\n        },\n        title: \"Your location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Circle, {\n        center: center,\n        radius: radiusMeters,\n        options: {\n          ...circleOptions,\n          fillOpacity: 0.06,\n          strokeColor: \"#1976D2\",\n          fillColor: \"#1976D2\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), donors.map(donor => {\n        var _donor$location, _donor$location2;\n        const lat = donor === null || donor === void 0 ? void 0 : (_donor$location = donor.location) === null || _donor$location === void 0 ? void 0 : _donor$location.latitude;\n        const lng = donor === null || donor === void 0 ? void 0 : (_donor$location2 = donor.location) === null || _donor$location2 === void 0 ? void 0 : _donor$location2.longitude;\n        if (typeof lat !== \"number\" || typeof lng !== \"number\") return null;\n        return /*#__PURE__*/_jsxDEV(Marker, {\n          position: {\n            lat,\n            lng\n          },\n          onClick: () => setSelectedDonor(donor)\n        }, donor.id || donor.uid || donor.email, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 15\n        }, this);\n      }), selectedDonor && /*#__PURE__*/_jsxDEV(InfoWindow, {\n        position: {\n          lat: selectedDonor.location.latitude,\n          lng: selectedDonor.location.longitude\n        },\n        onCloseClick: () => setSelectedDonor(null),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: selectedDonor.name || selectedDonor.fullname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Blood Group:\", \" \", selectedDonor.bloodGroup || selectedDonor.bloodType]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Contact: \", selectedDonor.contact || selectedDonor.phoneNo]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(DonorMap, \"tHPb/te5WZDCC7TI0MhGPzwtB2w=\");\n_c = DonorMap;\nexport default DonorMap;\nvar _c;\n$RefreshReg$(_c, \"DonorMap\");","map":{"version":3,"names":["React","useEffect","useRef","useState","GoogleMap","LoadScript","Marker","InfoWindow","Circle","jsxDEV","_jsxDEV","containerStyle","width","height","circleOptions","strokeOpacity","strokeWeight","clickable","draggable","editable","visible","zIndex","DonorMap","recipientLocation","donors","searchRadiusMiles","_s","mapRef","selectedDonor","setSelectedDonor","hasUserLocation","latitude","longitude","center","lat","lng","radiusMeters","Number","apiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","current","map","bounds","window","google","maps","LatLngBounds","extend","LatLng","forEach","d","_d$location","_d$location2","location","fitBounds","_","setCenter","setZoom","googleMapsApiKey","children","mapContainerStyle","zoom","onLoad","position","icon","url","scaledSize","Size","title","fileName","_jsxFileName","lineNumber","columnNumber","radius","options","fillOpacity","strokeColor","fillColor","donor","_donor$location","_donor$location2","onClick","id","uid","email","onCloseClick","name","fullname","bloodGroup","bloodType","contact","phoneNo","_c","$RefreshReg$"],"sources":["C:/Users/rajya/Desktop/Coding/WebDev/Programs/mini_project_LifeLink/blood-donor-finder/frontend/src/components/DonorMap.jsx"],"sourcesContent":["// DonorMap.jsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { GoogleMap, LoadScript, Marker, InfoWindow, Circle } from '@react-google-maps/api';\r\n\r\nconst containerStyle = {\r\n  width: '100%',\r\n  height: '400px'\r\n};\r\n\r\nconst circleOptions = {\r\n  strokeOpacity: 0.6,\r\n  strokeWeight: 2,\r\n  clickable: false,\r\n  draggable: false,\r\n  editable: false,\r\n  visible: true,\r\n  zIndex: 1\r\n};\r\n\r\nfunction DonorMap({ recipientLocation, donors = [], searchRadiusMiles = 25 }) {\r\n  const mapRef = useRef(null);\r\n  const [selectedDonor, setSelectedDonor] = useState(null);\r\n\r\n  const hasUserLocation =\r\n    recipientLocation &&\r\n    typeof recipientLocation.latitude === \"number\" &&\r\n    typeof recipientLocation.longitude === \"number\";\r\n\r\n  const center = hasUserLocation\r\n    ? {\r\n        lat: recipientLocation.latitude,\r\n        lng: recipientLocation.longitude\r\n      }\r\n    : { lat: 0, lng: 0 }; // dummy values to keep hooks stable\r\n\r\n  const radiusMeters = Number(searchRadiusMiles) * 1609.34;\r\n\r\n  const apiKey =\r\n    process.env.REACT_APP_GOOGLE_MAPS_API_KEY || \"YOUR_KEY_HERE\";\r\n\r\n  useEffect(() => {\r\n    if (!hasUserLocation) return;\r\n    if (!mapRef.current) return;\r\n\r\n    const map = mapRef.current;\r\n    const bounds = new window.google.maps.LatLngBounds();\r\n\r\n    bounds.extend(new window.google.maps.LatLng(center.lat, center.lng));\r\n\r\n    donors.forEach((d) => {\r\n      const lat = d?.location?.latitude;\r\n      const lng = d?.location?.longitude;\r\n      if (typeof lat === \"number\" && typeof lng === \"number\") {\r\n        bounds.extend(new window.google.maps.LatLng(lat, lng));\r\n      }\r\n    });\r\n\r\n    try {\r\n      map.fitBounds(bounds);\r\n    } catch (_) {\r\n      map.setCenter(center);\r\n      map.setZoom(12);\r\n    }\r\n  }, [hasUserLocation, center, donors]);\r\n\r\n  return (\r\n    <LoadScript googleMapsApiKey={apiKey}>\r\n      {hasUserLocation ? (\r\n        <GoogleMap\r\n          mapContainerStyle={containerStyle}\r\n          center={center}\r\n          zoom={12}\r\n          onLoad={(map) => {\r\n            mapRef.current = map;\r\n          }}\r\n        >\r\n          <Marker\r\n            position={center}\r\n            icon={{\r\n              url: \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\",\r\n              scaledSize: new window.google.maps.Size(40, 40)\r\n            }}\r\n            title=\"Your location\"\r\n          />\r\n\r\n          <Circle\r\n            center={center}\r\n            radius={radiusMeters}\r\n            options={{\r\n              ...circleOptions,\r\n              fillOpacity: 0.06,\r\n              strokeColor: \"#1976D2\",\r\n              fillColor: \"#1976D2\"\r\n            }}\r\n          />\r\n\r\n          {donors.map((donor) => {\r\n            const lat = donor?.location?.latitude;\r\n            const lng = donor?.location?.longitude;\r\n            if (typeof lat !== \"number\" || typeof lng !== \"number\") return null;\r\n\r\n            return (\r\n              <Marker\r\n                key={donor.id || donor.uid || donor.email}\r\n                position={{ lat, lng }}\r\n                onClick={() => setSelectedDonor(donor)}\r\n              />\r\n            );\r\n          })}\r\n\r\n          {selectedDonor && (\r\n            <InfoWindow\r\n              position={{\r\n                lat: selectedDonor.location.latitude,\r\n                lng: selectedDonor.location.longitude\r\n              }}\r\n              onCloseClick={() => setSelectedDonor(null)}\r\n            >\r\n              <div>\r\n                <h3>{selectedDonor.name || selectedDonor.fullname}</h3>\r\n                <p>\r\n                  Blood Group:{\" \"}\r\n                  {selectedDonor.bloodGroup || selectedDonor.bloodType}\r\n                </p>\r\n                <p>Contact: {selectedDonor.contact || selectedDonor.phoneNo}</p>\r\n              </div>\r\n            </InfoWindow>\r\n          )}\r\n        </GoogleMap>\r\n      ) : null}\r\n    </LoadScript>\r\n  );\r\n}\r\n\r\nexport default DonorMap;\r\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,SAAS,EAAEC,UAAU,EAAEC,MAAM,EAAEC,UAAU,EAAEC,MAAM,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3F,MAAMC,cAAc,GAAG;EACrBC,KAAK,EAAE,MAAM;EACbC,MAAM,EAAE;AACV,CAAC;AAED,MAAMC,aAAa,GAAG;EACpBC,aAAa,EAAE,GAAG;EAClBC,YAAY,EAAE,CAAC;EACfC,SAAS,EAAE,KAAK;EAChBC,SAAS,EAAE,KAAK;EAChBC,QAAQ,EAAE,KAAK;EACfC,OAAO,EAAE,IAAI;EACbC,MAAM,EAAE;AACV,CAAC;AAED,SAASC,QAAQA,CAAC;EAAEC,iBAAiB;EAAEC,MAAM,GAAG,EAAE;EAAEC,iBAAiB,GAAG;AAAG,CAAC,EAAE;EAAAC,EAAA;EAC5E,MAAMC,MAAM,GAAGzB,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAM,CAAC0B,aAAa,EAAEC,gBAAgB,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAExD,MAAM2B,eAAe,GACnBP,iBAAiB,IACjB,OAAOA,iBAAiB,CAACQ,QAAQ,KAAK,QAAQ,IAC9C,OAAOR,iBAAiB,CAACS,SAAS,KAAK,QAAQ;EAEjD,MAAMC,MAAM,GAAGH,eAAe,GAC1B;IACEI,GAAG,EAAEX,iBAAiB,CAACQ,QAAQ;IAC/BI,GAAG,EAAEZ,iBAAiB,CAACS;EACzB,CAAC,GACD;IAAEE,GAAG,EAAE,CAAC;IAAEC,GAAG,EAAE;EAAE,CAAC,CAAC,CAAC;;EAExB,MAAMC,YAAY,GAAGC,MAAM,CAACZ,iBAAiB,CAAC,GAAG,OAAO;EAExD,MAAMa,MAAM,GACVC,OAAO,CAACC,GAAG,CAACC,6BAA6B,IAAI,eAAe;EAE9DxC,SAAS,CAAC,MAAM;IACd,IAAI,CAAC6B,eAAe,EAAE;IACtB,IAAI,CAACH,MAAM,CAACe,OAAO,EAAE;IAErB,MAAMC,GAAG,GAAGhB,MAAM,CAACe,OAAO;IAC1B,MAAME,MAAM,GAAG,IAAIC,MAAM,CAACC,MAAM,CAACC,IAAI,CAACC,YAAY,CAAC,CAAC;IAEpDJ,MAAM,CAACK,MAAM,CAAC,IAAIJ,MAAM,CAACC,MAAM,CAACC,IAAI,CAACG,MAAM,CAACjB,MAAM,CAACC,GAAG,EAAED,MAAM,CAACE,GAAG,CAAC,CAAC;IAEpEX,MAAM,CAAC2B,OAAO,CAAEC,CAAC,IAAK;MAAA,IAAAC,WAAA,EAAAC,YAAA;MACpB,MAAMpB,GAAG,GAAGkB,CAAC,aAADA,CAAC,wBAAAC,WAAA,GAADD,CAAC,CAAEG,QAAQ,cAAAF,WAAA,uBAAXA,WAAA,CAAatB,QAAQ;MACjC,MAAMI,GAAG,GAAGiB,CAAC,aAADA,CAAC,wBAAAE,YAAA,GAADF,CAAC,CAAEG,QAAQ,cAAAD,YAAA,uBAAXA,YAAA,CAAatB,SAAS;MAClC,IAAI,OAAOE,GAAG,KAAK,QAAQ,IAAI,OAAOC,GAAG,KAAK,QAAQ,EAAE;QACtDS,MAAM,CAACK,MAAM,CAAC,IAAIJ,MAAM,CAACC,MAAM,CAACC,IAAI,CAACG,MAAM,CAAChB,GAAG,EAAEC,GAAG,CAAC,CAAC;MACxD;IACF,CAAC,CAAC;IAEF,IAAI;MACFQ,GAAG,CAACa,SAAS,CAACZ,MAAM,CAAC;IACvB,CAAC,CAAC,OAAOa,CAAC,EAAE;MACVd,GAAG,CAACe,SAAS,CAACzB,MAAM,CAAC;MACrBU,GAAG,CAACgB,OAAO,CAAC,EAAE,CAAC;IACjB;EACF,CAAC,EAAE,CAAC7B,eAAe,EAAEG,MAAM,EAAET,MAAM,CAAC,CAAC;EAErC,oBACEd,OAAA,CAACL,UAAU;IAACuD,gBAAgB,EAAEtB,MAAO;IAAAuB,QAAA,EAClC/B,eAAe,gBACdpB,OAAA,CAACN,SAAS;MACR0D,iBAAiB,EAAEnD,cAAe;MAClCsB,MAAM,EAAEA,MAAO;MACf8B,IAAI,EAAE,EAAG;MACTC,MAAM,EAAGrB,GAAG,IAAK;QACfhB,MAAM,CAACe,OAAO,GAAGC,GAAG;MACtB,CAAE;MAAAkB,QAAA,gBAEFnD,OAAA,CAACJ,MAAM;QACL2D,QAAQ,EAAEhC,MAAO;QACjBiC,IAAI,EAAE;UACJC,GAAG,EAAE,uDAAuD;UAC5DC,UAAU,EAAE,IAAIvB,MAAM,CAACC,MAAM,CAACC,IAAI,CAACsB,IAAI,CAAC,EAAE,EAAE,EAAE;QAChD,CAAE;QACFC,KAAK,EAAC;MAAe;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtB,CAAC,eAEFhE,OAAA,CAACF,MAAM;QACLyB,MAAM,EAAEA,MAAO;QACf0C,MAAM,EAAEvC,YAAa;QACrBwC,OAAO,EAAE;UACP,GAAG9D,aAAa;UAChB+D,WAAW,EAAE,IAAI;UACjBC,WAAW,EAAE,SAAS;UACtBC,SAAS,EAAE;QACb;MAAE;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAEDlD,MAAM,CAACmB,GAAG,CAAEqC,KAAK,IAAK;QAAA,IAAAC,eAAA,EAAAC,gBAAA;QACrB,MAAMhD,GAAG,GAAG8C,KAAK,aAALA,KAAK,wBAAAC,eAAA,GAALD,KAAK,CAAEzB,QAAQ,cAAA0B,eAAA,uBAAfA,eAAA,CAAiBlD,QAAQ;QACrC,MAAMI,GAAG,GAAG6C,KAAK,aAALA,KAAK,wBAAAE,gBAAA,GAALF,KAAK,CAAEzB,QAAQ,cAAA2B,gBAAA,uBAAfA,gBAAA,CAAiBlD,SAAS;QACtC,IAAI,OAAOE,GAAG,KAAK,QAAQ,IAAI,OAAOC,GAAG,KAAK,QAAQ,EAAE,OAAO,IAAI;QAEnE,oBACEzB,OAAA,CAACJ,MAAM;UAEL2D,QAAQ,EAAE;YAAE/B,GAAG;YAAEC;UAAI,CAAE;UACvBgD,OAAO,EAAEA,CAAA,KAAMtD,gBAAgB,CAACmD,KAAK;QAAE,GAFlCA,KAAK,CAACI,EAAE,IAAIJ,KAAK,CAACK,GAAG,IAAIL,KAAK,CAACM,KAAK;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAG1C,CAAC;MAEN,CAAC,CAAC,EAED9C,aAAa,iBACZlB,OAAA,CAACH,UAAU;QACT0D,QAAQ,EAAE;UACR/B,GAAG,EAAEN,aAAa,CAAC2B,QAAQ,CAACxB,QAAQ;UACpCI,GAAG,EAAEP,aAAa,CAAC2B,QAAQ,CAACvB;QAC9B,CAAE;QACFuD,YAAY,EAAEA,CAAA,KAAM1D,gBAAgB,CAAC,IAAI,CAAE;QAAAgC,QAAA,eAE3CnD,OAAA;UAAAmD,QAAA,gBACEnD,OAAA;YAAAmD,QAAA,EAAKjC,aAAa,CAAC4D,IAAI,IAAI5D,aAAa,CAAC6D;UAAQ;YAAAlB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACvDhE,OAAA;YAAAmD,QAAA,GAAG,cACW,EAAC,GAAG,EACfjC,aAAa,CAAC8D,UAAU,IAAI9D,aAAa,CAAC+D,SAAS;UAAA;YAAApB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnD,CAAC,eACJhE,OAAA;YAAAmD,QAAA,GAAG,WAAS,EAACjC,aAAa,CAACgE,OAAO,IAAIhE,aAAa,CAACiE,OAAO;UAAA;YAAAtB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7D;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CACb;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACQ,CAAC,GACV;EAAI;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEjB;AAAChD,EAAA,CAjHQJ,QAAQ;AAAAwE,EAAA,GAARxE,QAAQ;AAmHjB,eAAeA,QAAQ;AAAC,IAAAwE,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}