{"ast":null,"code":"// src/components/Header.jsx\nimport React,{useState,useEffect}from'react';import'./Header.css';import Modal from'./modal';import{signOut}from'firebase/auth';import{auth}from\"./firebase\";import Login from\"./Login\";import{removeTokenForUser,registerTokenForUser}from\"../firebaseMessaging\";import SignUp from\"./SignUp\";// FIXED â€” correct component name\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Header(_ref){let{isLoginModalOpen,setIsLoginModalOpen}=_ref;const[isSignupModalOpen,setIsSignupModalOpen]=useState(false);// FIXED\nconst[user,setUser]=useState(null);useEffect(()=>{const unsubscribe=auth.onAuthStateChanged(async currentUser=>{setUser(currentUser);if(currentUser&&currentUser.uid){try{await registerTokenForUser(currentUser.uid);}catch(err){console.warn(\"FCM token registration failed:\",err);}}});return()=>unsubscribe();},[]);const handleLogout=()=>{const currentUser=auth.currentUser;// FIXED\nconst uid=currentUser===null||currentUser===void 0?void 0:currentUser.uid;// FIXED\nsignOut(auth).then(async()=>{if(uid)await removeTokenForUser(uid);console.log(\"User logged out, token removed\");}).catch(error=>{console.error(\"Logout error\",error);});};return/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-contents\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83E\\uDE78LifeLink\"})}),/*#__PURE__*/_jsx(\"nav\",{className:\"nav\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#home\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#search\",children:\"Find Donors\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#register\",children:\"Register\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#about\",children:\"About\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"tel:011-23359379\",className:\"emergency-button\",children:\"Emergency\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"user-login\",children:/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:user?/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn\",children:\"Logout\"}):/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:e=>{e.preventDefault();setIsLoginModalOpen(true);// Login modal\n},children:\"Login\"})})})}),/*#__PURE__*/_jsxs(\"button\",{className:\"mobile-menu-toggle\",\"aria-label\":\"Toggle-mobile-view\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})]})}),/*#__PURE__*/_jsx(Modal,{isOpen:isLoginModalOpen,onClose:()=>setIsLoginModalOpen(false),children:/*#__PURE__*/_jsx(Login,{onOpenRegister:()=>{setIsLoginModalOpen(false);setIsSignupModalOpen(true);},closeLoginModal:()=>setIsLoginModalOpen(false)})}),/*#__PURE__*/_jsx(Modal,{isOpen:isSignupModalOpen,onClose:()=>setIsSignupModalOpen(false),children:/*#__PURE__*/_jsx(SignUp,{onOpenLogin:()=>{setIsSignupModalOpen(false);setIsLoginModalOpen(true);},onClose:()=>setIsSignupModalOpen(false)// IMPORTANT\n})})]});}export default Header;","map":{"version":3,"names":["React","useState","useEffect","Modal","signOut","auth","Login","removeTokenForUser","registerTokenForUser","SignUp","jsx","_jsx","jsxs","_jsxs","Header","_ref","isLoginModalOpen","setIsLoginModalOpen","isSignupModalOpen","setIsSignupModalOpen","user","setUser","unsubscribe","onAuthStateChanged","currentUser","uid","err","console","warn","handleLogout","then","log","catch","error","className","children","href","onClick","e","preventDefault","isOpen","onClose","onOpenRegister","closeLoginModal","onOpenLogin"],"sources":["C:/Users/rajya/Desktop/Coding/WebDev/Programs/mini_project_LifeLink/blood-donor-finder/frontend/src/components/Header.jsx"],"sourcesContent":["// src/components/Header.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport './Header.css';\r\nimport Modal from './modal';\r\nimport { signOut } from 'firebase/auth';\r\nimport { auth } from \"./firebase\";\r\nimport Login from \"./Login\";\r\nimport { removeTokenForUser, registerTokenForUser } from \"../firebaseMessaging\";\r\nimport SignUp from \"./SignUp\";   // FIXED â€” correct component name\r\n\r\nfunction Header({ isLoginModalOpen, setIsLoginModalOpen }) {\r\n\r\n    const [isSignupModalOpen, setIsSignupModalOpen] = useState(false); // FIXED\r\n    const [user, setUser] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = auth.onAuthStateChanged(async (currentUser) => {\r\n            setUser(currentUser);\r\n\r\n            if (currentUser && currentUser.uid) {\r\n                try {\r\n                    await registerTokenForUser(currentUser.uid);\r\n                } catch (err) {\r\n                    console.warn(\"FCM token registration failed:\", err);\r\n                }\r\n            }\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    const handleLogout = () => {\r\n        const currentUser = auth.currentUser;   // FIXED\r\n        const uid = currentUser?.uid;           // FIXED\r\n\r\n        signOut(auth)\r\n            .then(async () => {\r\n                if (uid) await removeTokenForUser(uid);\r\n                console.log(\"User logged out, token removed\");\r\n            })\r\n            .catch(error => {\r\n                console.error(\"Logout error\", error);\r\n            });\r\n    };\r\n\r\n    return (\r\n        <header className=\"header\">\r\n            <div className=\"container\">\r\n                <div className=\"header-contents\">\r\n                    <div className=\"logo\">\r\n                        <h1>ðŸ©¸LifeLink</h1>\r\n                    </div>\r\n\r\n                    <nav className=\"nav\">\r\n                        <ul>\r\n                            <li><a href=\"#home\">Home</a></li>\r\n                            <li><a href=\"#search\">Find Donors</a></li>\r\n                            <li><a href=\"#register\">Register</a></li>\r\n                            <li><a href=\"#about\">About</a></li>\r\n                            <li><a href=\"tel:011-23359379\" className=\"emergency-button\">Emergency</a></li>\r\n                        </ul>\r\n                    </nav>\r\n\r\n                    <div className=\"user-login\">\r\n                        <ul>\r\n                            <li>\r\n                                {user ? (\r\n                                    <button onClick={handleLogout} className=\"logout-btn\">Logout</button>\r\n                                ) : (\r\n                                    <a\r\n                                        href=\"#\"\r\n                                        onClick={e => {\r\n                                            e.preventDefault();\r\n                                            setIsLoginModalOpen(true); // Login modal\r\n                                        }}\r\n                                    >\r\n                                        Login\r\n                                    </a>\r\n                                )}\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <button className=\"mobile-menu-toggle\" aria-label=\"Toggle-mobile-view\">\r\n                        <span></span>\r\n                        <span></span>\r\n                        <span></span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* LOGIN MODAL */}\r\n            <Modal\r\n                isOpen={isLoginModalOpen}\r\n                onClose={() => setIsLoginModalOpen(false)}\r\n            >\r\n                <Login\r\n                    onOpenRegister={() => {\r\n                        setIsLoginModalOpen(false);\r\n                        setIsSignupModalOpen(true);\r\n                    }}\r\n                    closeLoginModal={() => setIsLoginModalOpen(false)}\r\n                />\r\n            </Modal>\r\n\r\n            {/* SIGNUP MODAL â€” FIXED */}\r\n            <Modal\r\n                isOpen={isSignupModalOpen}\r\n                onClose={() => setIsSignupModalOpen(false)}\r\n            >\r\n                <SignUp\r\n                    onOpenLogin={() => {\r\n                        setIsSignupModalOpen(false);\r\n                        setIsLoginModalOpen(true);\r\n                    }}\r\n                    onClose={() => setIsSignupModalOpen(false)} // IMPORTANT\r\n                />\r\n            </Modal>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}