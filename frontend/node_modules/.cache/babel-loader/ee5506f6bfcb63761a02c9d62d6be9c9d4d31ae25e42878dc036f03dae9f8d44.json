{"ast":null,"code":"// src/components/Header.jsx\nimport React,{useState,useEffect}from'react';import'./Header.css';import Modal from'./modal';import{signOut,onAuthStateChanged}from'firebase/auth';import{auth}from\"../firebase\";import{setupAutoRegistration,removeTokenForUser}from\"../firebaseMessaging\";import Login from\"./Login\";import SignUp from\"./SignUp\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Header(_ref){let{isLoginModalOpen,setIsLoginModalOpen}=_ref;const[isSignupModalOpen,setIsSignupModalOpen]=useState(false);const[user,setUser]=useState(null);const[isNavOpen,setIsNavOpen]=useState(false);useEffect(()=>{const unsub=onAuthStateChanged(auth,async u=>{setUser(u||null);if(u){try{await setupAutoRegistration({uid:u.uid});}catch(err){console.warn('FCM token registration failed:',err);}}});return()=>{try{unsub();}catch(_){}};},[]);const handleLogout=()=>{var _auth$currentUser;const uid=(_auth$currentUser=auth.currentUser)===null||_auth$currentUser===void 0?void 0:_auth$currentUser.uid;signOut(auth).then(async()=>{if(uid)await removeTokenForUser(uid);console.log(\"User logged out, token removed\");}).catch(error=>{console.error(\"Logout error\",error);});};const handleNavLinkClick=()=>{setIsNavOpen(false);};return/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header-contents\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"LifeLink\"})}),/*#__PURE__*/_jsx(\"nav\",{className:\"nav \".concat(isNavOpen?'nav-open':''),children:/*#__PURE__*/_jsxs(\"ul\",{onClick:handleNavLinkClick,children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#home\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#search\",children:\"Find Donors\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#register\",children:\"Register\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#about\",children:\"About\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"tel:011-23359379\",className:\"emergency-button\",children:\"Emergency\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-controls\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-login\",children:/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:user?/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn\",children:\"Logout\"}):/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:e=>{e.preventDefault();setIsLoginModalOpen(true);},children:\"Login\"})})})}),/*#__PURE__*/_jsxs(\"button\",{className:\"mobile-menu-toggle \".concat(isNavOpen?'open':''),\"aria-label\":isNavOpen?\"Close menu\":\"Open menu\",\"aria-expanded\":isNavOpen,onClick:()=>setIsNavOpen(v=>!v),children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})]})]})}),/*#__PURE__*/_jsx(Modal,{isOpen:isLoginModalOpen,onClose:()=>setIsLoginModalOpen(false),children:/*#__PURE__*/_jsx(Login,{onOpenRegister:()=>{setIsLoginModalOpen(false);setIsSignupModalOpen(true);},closeLoginModal:()=>setIsLoginModalOpen(false)})}),/*#__PURE__*/_jsx(Modal,{isOpen:isSignupModalOpen,onClose:()=>setIsSignupModalOpen(false),children:/*#__PURE__*/_jsx(SignUp,{onOpenLogin:()=>{setIsSignupModalOpen(false);setIsLoginModalOpen(true);},onClose:()=>setIsSignupModalOpen(false)})})]});}export default Header;","map":{"version":3,"names":["React","useState","useEffect","Modal","signOut","onAuthStateChanged","auth","setupAutoRegistration","removeTokenForUser","Login","SignUp","jsx","_jsx","jsxs","_jsxs","Header","_ref","isLoginModalOpen","setIsLoginModalOpen","isSignupModalOpen","setIsSignupModalOpen","user","setUser","isNavOpen","setIsNavOpen","unsub","u","uid","err","console","warn","_","handleLogout","_auth$currentUser","currentUser","then","log","catch","error","handleNavLinkClick","className","children","concat","onClick","href","e","preventDefault","v","isOpen","onClose","onOpenRegister","closeLoginModal","onOpenLogin"],"sources":["C:/Users/rajya/Desktop/Coding/WebDev/Programs/mini_project_LifeLink/blood-donor-finder/frontend/src/components/Header.jsx"],"sourcesContent":["// src/components/Header.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport './Header.css';\r\nimport Modal from './modal';\r\nimport { signOut, onAuthStateChanged } from 'firebase/auth';\r\nimport { auth } from \"../firebase\";\r\nimport { setupAutoRegistration, removeTokenForUser } from \"../firebaseMessaging\";\r\nimport Login from \"./Login\";\r\nimport SignUp from \"./SignUp\";\r\n\r\nfunction Header({ isLoginModalOpen, setIsLoginModalOpen }) {\r\n  const [isSignupModalOpen, setIsSignupModalOpen] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [isNavOpen, setIsNavOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const unsub = onAuthStateChanged(auth, async (u) => {\r\n      setUser(u || null);\r\n\r\n      if (u) {\r\n        try {\r\n          await setupAutoRegistration({ uid: u.uid });\r\n        } catch (err) {\r\n          console.warn('FCM token registration failed:', err);\r\n        }\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      try { unsub(); } catch (_) {}\r\n    };\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    const uid = auth.currentUser?.uid;\r\n\r\n    signOut(auth)\r\n      .then(async () => {\r\n        if (uid) await removeTokenForUser(uid);\r\n        console.log(\"User logged out, token removed\");\r\n      })\r\n      .catch(error => {\r\n        console.error(\"Logout error\", error);\r\n      });\r\n  };\r\n\r\n  const handleNavLinkClick = () => {\r\n    setIsNavOpen(false);\r\n  };\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <div className=\"container\">\r\n        <div className=\"header-contents\">\r\n          <div className=\"logo\">\r\n            <h1>LifeLink</h1>\r\n          </div>\r\n\r\n          <nav className={`nav ${isNavOpen ? 'nav-open' : ''}`}>\r\n            <ul onClick={handleNavLinkClick}>\r\n              <li><a href=\"#home\">Home</a></li>\r\n              <li><a href=\"#search\">Find Donors</a></li>\r\n              <li><a href=\"#register\">Register</a></li>\r\n              <li><a href=\"#about\">About</a></li>\r\n              <li><a href=\"tel:011-23359379\" className=\"emergency-button\">Emergency</a></li>\r\n            </ul>\r\n          </nav>\r\n\r\n          {/* NEW: wrap login + hamburger */}\r\n          <div className=\"right-controls\">\r\n            <div className=\"user-login\">\r\n              <ul>\r\n                <li>\r\n                  {user ? (\r\n                    <button onClick={handleLogout} className=\"logout-btn\">\r\n                      Logout\r\n                    </button>\r\n                  ) : (\r\n                    <a\r\n                      href=\"#\"\r\n                      onClick={e => {\r\n                        e.preventDefault();\r\n                        setIsLoginModalOpen(true);\r\n                      }}\r\n                    >\r\n                      Login\r\n                    </a>\r\n                  )}\r\n                </li>\r\n              </ul>\r\n            </div>\r\n\r\n            <button\r\n              className={`mobile-menu-toggle ${isNavOpen ? 'open' : ''}`}\r\n              aria-label={isNavOpen ? \"Close menu\" : \"Open menu\"}\r\n              aria-expanded={isNavOpen}\r\n              onClick={() => setIsNavOpen(v => !v)}\r\n            >\r\n              <span></span>\r\n              <span></span>\r\n              <span></span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <Modal isOpen={isLoginModalOpen} onClose={() => setIsLoginModalOpen(false)}>\r\n        <Login\r\n          onOpenRegister={() => { setIsLoginModalOpen(false); setIsSignupModalOpen(true); }}\r\n          closeLoginModal={() => setIsLoginModalOpen(false)}\r\n        />\r\n      </Modal>\r\n\r\n      <Modal isOpen={isSignupModalOpen} onClose={() => setIsSignupModalOpen(false)}>\r\n        <SignUp\r\n          onOpenLogin={() => { setIsSignupModalOpen(false); setIsLoginModalOpen(true); }}\r\n          onClose={() => setIsSignupModalOpen(false)}\r\n        />\r\n      </Modal>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}