{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rajya\\\\Desktop\\\\Coding\\\\WebDev\\\\Programs\\\\mini_project_LifeLink\\\\blood-donor-finder\\\\frontend\\\\src\\\\components\\\\DonorMap.jsx\",\n  _s = $RefreshSig$();\n// DonorMap.jsx\nimport React, { useEffect, useRef } from 'react';\nimport { GoogleMap, LoadScript, Marker, InfoWindow, Circle } from '@react-google-maps/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: '100%',\n  height: '400px'\n};\n\n// circle options for user highlight (tweak radius/opacity as needed)\nconst circleOptions = {\n  strokeOpacity: 0.6,\n  strokeWeight: 2,\n  clickable: false,\n  draggable: false,\n  editable: false,\n  visible: true,\n  zIndex: 1\n};\nfunction DonorMap({\n  recipientLocation,\n  donors = [],\n  searchRadiusMiles = 25\n}) {\n  _s();\n  const mapRef = useRef(null);\n  const [selectedDonor, setSelectedDonor] = React.useState(null);\n  if (!recipientLocation || typeof recipientLocation.latitude !== 'number' || typeof recipientLocation.longitude !== 'number') {\n    return null;\n  }\n  const center = {\n    lat: recipientLocation.latitude,\n    lng: recipientLocation.longitude\n  };\n\n  // Convert search radius from miles to meters for Circle\n  const radiusMeters = Number(searchRadiusMiles) * 1609.34;\n\n  // Use env var for API key; fallback removed in production recommended\n  const apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY || \"YOUR_KEY_HERE\";\n\n  // Fit bounds to include user + donors\n  useEffect(() => {\n    if (!mapRef.current) return;\n    const map = mapRef.current;\n    const bounds = new window.google.maps.LatLngBounds();\n    bounds.extend(new window.google.maps.LatLng(center.lat, center.lng));\n    donors.forEach(d => {\n      var _d$location, _d$location2;\n      const lat = d === null || d === void 0 ? void 0 : (_d$location = d.location) === null || _d$location === void 0 ? void 0 : _d$location.latitude;\n      const lng = d === null || d === void 0 ? void 0 : (_d$location2 = d.location) === null || _d$location2 === void 0 ? void 0 : _d$location2.longitude;\n      if (typeof lat === 'number' && typeof lng === 'number') {\n        bounds.extend(new window.google.maps.LatLng(lat, lng));\n      }\n    });\n\n    // only fit if bounds are larger than a single point\n    try {\n      map.fitBounds(bounds);\n    } catch (e) {\n      // fallback to center/zoom if fitBounds fails\n      map.setCenter(center);\n      map.setZoom(12);\n    }\n  }, [recipientLocation, donors]);\n  return /*#__PURE__*/_jsxDEV(LoadScript, {\n    googleMapsApiKey: apiKey,\n    children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n      mapContainerStyle: containerStyle,\n      center: center,\n      zoom: 12,\n      onLoad: mapInstance => {\n        mapRef.current = mapInstance;\n      },\n      children: [/*#__PURE__*/_jsxDEV(Marker, {\n        position: center,\n        icon: {\n          url: \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\",\n          scaledSize: new window.google.maps.Size(40, 40)\n        },\n        title: \"Your location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Circle, {\n        center: center,\n        radius: radiusMeters,\n        options: {\n          ...circleOptions,\n          fillOpacity: 0.06,\n          strokeColor: '#1976D2',\n          fillColor: '#1976D2'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), Array.isArray(donors) && donors.map(donor => {\n        var _donor$location, _donor$location2;\n        const lat = donor === null || donor === void 0 ? void 0 : (_donor$location = donor.location) === null || _donor$location === void 0 ? void 0 : _donor$location.latitude;\n        const lng = donor === null || donor === void 0 ? void 0 : (_donor$location2 = donor.location) === null || _donor$location2 === void 0 ? void 0 : _donor$location2.longitude;\n        if (typeof lat !== 'number' || typeof lng !== 'number') return null;\n        return /*#__PURE__*/_jsxDEV(Marker, {\n          position: {\n            lat,\n            lng\n          },\n          onClick: () => setSelectedDonor(donor)\n        }, donor.id || donor.uid || donor.email, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this);\n      }), selectedDonor && /*#__PURE__*/_jsxDEV(InfoWindow, {\n        position: {\n          lat: selectedDonor.location.latitude,\n          lng: selectedDonor.location.longitude\n        },\n        onCloseClick: () => setSelectedDonor(null),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: selectedDonor.name || selectedDonor.fullname || \"Donor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Blood Group: \", selectedDonor.bloodGroup || selectedDonor.bloodType]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Contact: \", selectedDonor.contact || selectedDonor.phoneNo]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(DonorMap, \"tHPb/te5WZDCC7TI0MhGPzwtB2w=\");\n_c = DonorMap;\nexport default DonorMap;\nvar _c;\n$RefreshReg$(_c, \"DonorMap\");","map":{"version":3,"names":["React","useEffect","useRef","GoogleMap","LoadScript","Marker","InfoWindow","Circle","jsxDEV","_jsxDEV","containerStyle","width","height","circleOptions","strokeOpacity","strokeWeight","clickable","draggable","editable","visible","zIndex","DonorMap","recipientLocation","donors","searchRadiusMiles","_s","mapRef","selectedDonor","setSelectedDonor","useState","latitude","longitude","center","lat","lng","radiusMeters","Number","apiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","current","map","bounds","window","google","maps","LatLngBounds","extend","LatLng","forEach","d","_d$location","_d$location2","location","fitBounds","e","setCenter","setZoom","googleMapsApiKey","children","mapContainerStyle","zoom","onLoad","mapInstance","position","icon","url","scaledSize","Size","title","fileName","_jsxFileName","lineNumber","columnNumber","radius","options","fillOpacity","strokeColor","fillColor","Array","isArray","donor","_donor$location","_donor$location2","onClick","id","uid","email","onCloseClick","name","fullname","bloodGroup","bloodType","contact","phoneNo","_c","$RefreshReg$"],"sources":["C:/Users/rajya/Desktop/Coding/WebDev/Programs/mini_project_LifeLink/blood-donor-finder/frontend/src/components/DonorMap.jsx"],"sourcesContent":["// DonorMap.jsx\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { GoogleMap, LoadScript, Marker, InfoWindow, Circle } from '@react-google-maps/api';\r\n\r\nconst containerStyle = {\r\n  width: '100%',\r\n  height: '400px'\r\n};\r\n\r\n// circle options for user highlight (tweak radius/opacity as needed)\r\nconst circleOptions = {\r\n  strokeOpacity: 0.6,\r\n  strokeWeight: 2,\r\n  clickable: false,\r\n  draggable: false,\r\n  editable: false,\r\n  visible: true,\r\n  zIndex: 1\r\n};\r\n\r\nfunction DonorMap({ recipientLocation, donors = [], searchRadiusMiles = 25 }) {\r\n  const mapRef = useRef(null);\r\n  const [selectedDonor, setSelectedDonor] = React.useState(null);\r\n\r\n  if (!recipientLocation || typeof recipientLocation.latitude !== 'number' || typeof recipientLocation.longitude !== 'number') {\r\n    return null;\r\n  }\r\n\r\n  const center = {\r\n    lat: recipientLocation.latitude,\r\n    lng: recipientLocation.longitude\r\n  };\r\n\r\n  // Convert search radius from miles to meters for Circle\r\n  const radiusMeters = Number(searchRadiusMiles) * 1609.34;\r\n\r\n  // Use env var for API key; fallback removed in production recommended\r\n  const apiKey = process.env.REACT_APP_GOOGLE_MAPS_API_KEY || \"YOUR_KEY_HERE\";\r\n\r\n  // Fit bounds to include user + donors\r\n  useEffect(() => {\r\n    if (!mapRef.current) return;\r\n    const map = mapRef.current;\r\n    const bounds = new window.google.maps.LatLngBounds();\r\n    bounds.extend(new window.google.maps.LatLng(center.lat, center.lng));\r\n\r\n    donors.forEach(d => {\r\n      const lat = d?.location?.latitude;\r\n      const lng = d?.location?.longitude;\r\n      if (typeof lat === 'number' && typeof lng === 'number') {\r\n        bounds.extend(new window.google.maps.LatLng(lat, lng));\r\n      }\r\n    });\r\n\r\n    // only fit if bounds are larger than a single point\r\n    try {\r\n      map.fitBounds(bounds);\r\n    } catch (e) {\r\n      // fallback to center/zoom if fitBounds fails\r\n      map.setCenter(center);\r\n      map.setZoom(12);\r\n    }\r\n  }, [recipientLocation, donors]);\r\n\r\n  return (\r\n    <LoadScript googleMapsApiKey={apiKey}>\r\n      <GoogleMap\r\n        mapContainerStyle={containerStyle}\r\n        center={center}\r\n        zoom={12}\r\n        onLoad={mapInstance => { mapRef.current = mapInstance; }}\r\n      >\r\n        {/* User location: prominent marker */}\r\n        <Marker\r\n          position={center}\r\n          icon={{\r\n            url: \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\",\r\n            scaledSize: new window.google.maps.Size(40, 40)\r\n          }}\r\n          title=\"Your location\"\r\n        />\r\n\r\n        {/* Circle around user to show search radius */}\r\n        <Circle\r\n          center={center}\r\n          radius={radiusMeters}\r\n          options={{\r\n            ...circleOptions,\r\n            fillOpacity: 0.06,\r\n            strokeColor: '#1976D2',\r\n            fillColor: '#1976D2'\r\n          }}\r\n        />\r\n\r\n        {/* Donor markers */}\r\n        {Array.isArray(donors) && donors.map((donor) => {\r\n          const lat = donor?.location?.latitude;\r\n          const lng = donor?.location?.longitude;\r\n          if (typeof lat !== 'number' || typeof lng !== 'number') return null;\r\n\r\n          return (\r\n            <Marker\r\n              key={donor.id || donor.uid || donor.email}\r\n              position={{ lat, lng }}\r\n              onClick={() => setSelectedDonor(donor)}\r\n            />\r\n          );\r\n        })}\r\n\r\n        {/* InfoWindow for selected donor */}\r\n        {selectedDonor && (\r\n          <InfoWindow\r\n            position={{\r\n              lat: selectedDonor.location.latitude,\r\n              lng: selectedDonor.location.longitude\r\n            }}\r\n            onCloseClick={() => setSelectedDonor(null)}\r\n          >\r\n            <div>\r\n              <h3>{selectedDonor.name || selectedDonor.fullname || \"Donor\"}</h3>\r\n              <p>Blood Group: {selectedDonor.bloodGroup || selectedDonor.bloodType}</p>\r\n              <p>Contact: {selectedDonor.contact || selectedDonor.phoneNo}</p>\r\n            </div>\r\n          </InfoWindow>\r\n        )}\r\n      </GoogleMap>\r\n    </LoadScript>\r\n  );\r\n}\r\n\r\nexport default DonorMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}